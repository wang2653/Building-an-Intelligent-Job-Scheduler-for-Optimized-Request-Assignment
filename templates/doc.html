<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Doctor-Patient Management</title>
  <link rel="stylesheet" type="text/css" href="../static/style.css">
</head>
<body>

  <div class="doctor-container">
    <!-- Left Sidebar -->
    <div class="sidebar">
      <h2>Scheduler Panel</h2>
      <div class="panel-selection">
        <a href="#doctor">Doctor</a>
        <a href="#patient">Patient</a>
      </div>
  
  
      <div id="doctor"></div>
      <div id="patient"></div>
  
      <div class="panel doctor-panel">
          <form method="post">
            <label>Doctor Name</label>
            <input type="text" name="name" required>
            <label>Availability</label>
            <input type="text" name="availability">
            <div class="button-top">
              <button>Add/Edit Doctor</button>
              <button>Remove Doctor</button>
            </div>
        </form>
      </div>
  
      <div class="panel patient-panel">
        <form method="post">
          <label>Patient ID</label>
          <input type="text" name="id" required>
          <label>Arrivial Time</label>
          <input type="text" name="arrival_time">
          <label>Acuity Level</label>
          <input type="text" name="acuity_level">
          <label>Treatment Plan</label>
          <input type="text" name="treatment_plan">
          <div class="button-top">
            <button>Add/Edit Patient</button>
            <button>Remove Patient</button>
          </div>
        </form>
      </div>
    </div>
  
    <!-- Main Content Area -->
    <div class="main">
      <!-- Header with Buttons -->
      <div class="header">
        <button id="doctorBtn">Doctor</button>
        <button id="patientBtn">Patient</button>
        <button id="searchBtn">Search</button>
      </div>
  
      <!-- Search Bar (hidden by default) -->
      <div class="search-bar" id="searchBar">
        <input type="text" placeholder="Search..." />
      </div>
  
      <!-- Content to show Doctor/Patient cards -->
      <div class="content" id="contentArea">
        <!-- Default or initial content can be placed here -->
        <!-- Will be replaced by JavaScript in this demo -->
        <div class="card">
          <img src="https://via.placeholder.com/80" alt="Default Photo">
          <h3>Welcome</h3>
          <p>Select Doctor or Patient</p>
        </div>
      </div>
    </div>
  </div>

<script>
  const doctorBtn = document.getElementById('doctorBtn');
  const patientBtn = document.getElementById('patientBtn');
  const searchBtn  = document.getElementById('searchBtn');
  const searchBar  = document.getElementById('searchBar');
  const contentArea= document.getElementById('contentArea');
  let currentView = 'default';
  let patientInterval = null;
  
  const maxPatients = 200;
  let patientCards = [];
  
// Show doctor cards when "Doctor" button is clicked
doctorBtn.addEventListener('click', () => {
    console.log("Doctor button clicked. Switching to doctor view.");
    currentView = 'doctor'; 
    if (patientInterval) {
        clearInterval(patientInterval); 
        patientInterval = null;
    }
    searchBar.classList.remove('show-search');
  
    // Hide patient cards
    patientCards.forEach(card => card.style.display = 'none');
    
    // Display doctor cards
    contentArea.innerHTML = doctorCardsHTML;
});

const doctorCardsHTML = `
  <div class="card">
    <img src="../static/doc1.jpeg" alt="Doctor Photo">
    <h3>Dr. John</h3>
    <p>Available</p>
  </div>
  <div class="card">
    <img src="../static/doc2.jpeg" alt="Doctor Photo">
    <h3>Dr. Smith</h3>
    <p>On Leave</p>
  </div>
  <div class="card">
    <img src="../static/doc3.jpeg" alt="Doctor Photo">
    <h3>Dr. Jane</h3>
    <p>Busy</p>
  </div>
  <div class="card">
    <img src="../static/doc4.jpeg" alt="Doctor Photo">
    <h3>Dr. Emily</h3>
    <p>Available</p>
  </div>
  <div class="card">
    <img src="../static/doc9.jpg" alt="Doctor Photo">
    <h3>Dr. Carter</h3>
    <p>Available</p>
  </div>
  <div class="card">
    <img src="../static/doc10.jpg" alt="Doctor Photo">
    <h3>Dr. Li</h3>
    <p>Available</p>
  </div>
  <div class="card">
    <img src="../static/doc12.jpg" alt="Doctor Photo">
    <h3>Dr. Helen</h3>
    <p>Available</p>
  </div>
  <div class="card">
    <img src="../static/doc13.jpg" alt="Doctor Photo">
    <h3>Dr. Virgil</h3>
    <p>Available</p>
  </div>
`;


  function createPatientCards() {
      contentArea.innerHTML = '';
      for (let i = 0; i < maxPatients; i++) {
          const card = document.createElement('div');
          card.className = 'card patient-card';
          card.style.display = 'none';
          card.innerHTML = `
              <img src="https://via.placeholder.com/80" alt="Patient Photo">
              <h3 id="patient-id-${i}">Patient</h3>
              <p id="acuity-${i}">Acuity Level: </p>
              <p id="waiting-${i}">Waiting Time: </p>
              <p id="treatment-${i}">Current Treatment: </p>
              <p id="remaining-${i}">Remaining Time: </p>
              <p id="status-${i}">Status: </p>
          `;
          contentArea.appendChild(card);
          patientCards.push(card);
      }
  }
  
  function updatePatients() {
      if (currentView !== 'patient') return;
  
      fetch('/get_patients')
          .then(response => response.json())
          .then(newPatients => {
              for (let i = 0; i < maxPatients; i++) {
                  if (i < newPatients.length) {
                      document.getElementById(`patient-id-${i}`).innerText = `Patient ${newPatients[i].patient_id}`;
                      document.getElementById(`acuity-${i}`).innerText = `Acuity Level: ${newPatients[i].acuity_level}`;
                      document.getElementById(`waiting-${i}`).innerText = `Waiting Time: ${newPatients[i].waiting_time}`;
                      document.getElementById(`treatment-${i}`).innerText = `Current Treatment: ${newPatients[i].current_treatment}`;
                      document.getElementById(`remaining-${i}`).innerText = `Remaining Time: ${newPatients[i].remaining_time}`;
                      document.getElementById(`status-${i}`).innerText = `Status: ${newPatients[i].status}`;
                      patientCards[i].style.display = 'block';
                  } else {
                      patientCards[i].style.display = 'none';
                  }
              }
          });
  }
  
  createPatientCards();
  
  patientBtn.addEventListener('click', () => {
    console.log("Patient button clicked. Switching to patient view.");
    currentView = 'patient';
    if (patientInterval) {
        clearInterval(patientInterval);
    }
    searchBar.classList.remove('show-search');

    // Clear doctor cards
    contentArea.innerHTML = ''; 
    
    // Append patient cards but keep them hidden initially
    patientCards.forEach(card => {
        card.style.display = 'none'; // Keep all patient cards hidden initially
        contentArea.appendChild(card);
    });

    // First update ensures only the correct number of cards are shown
    updatePatients();

    // Start the update interval
    patientInterval = setInterval(updatePatients, 1000);
  });
</script>

</body>
</html>


